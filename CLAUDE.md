ni d# Claude AI å·¥ä½œæŒ‡å— - Anki æ’ä»¶å¼€å‘

æœ¬æ–‡æ¡£ä¸º Claude Code æä¾›ä¸“ä¸šçš„ Anki æ’ä»¶å¼€å‘æŒ‡å¯¼ã€‚

## ðŸ“Š é¡¹ç›®åŸºæœ¬æƒ…å†µ

### é¡¹ç›®æ¦‚è§ˆ
- **é¡¹ç›®åç§°**: Anki Image Editor (anki-image-editor)  
- **ç‰ˆæœ¬**: 1.0.0
- **ç±»åž‹**: Anki æ’ä»¶ - å›¾åƒç¼–è¾‘å·¥å…·
- **ä½œè€…**: xiaobuyao (xiaobuyao@gmail.com)
- **è®¸å¯è¯**: MIT

### æ ¸å¿ƒåŠŸèƒ½
- ðŸŽ¨ **å†…ç½®çŸ¢é‡ç¼–è¾‘å™¨** - åŸºäºŽ Method Draw SVG ç¼–è¾‘å™¨
- âœï¸ **ç»˜å›¾å·¥å…·** - ç”»ç¬”ã€å½¢çŠ¶ã€æ–‡å­—ç­‰ä¸“ä¸šå·¥å…·
- ðŸ–¼ï¸ **å›¾åƒæ ‡æ³¨** - ä¸ºçŽ°æœ‰å›¾åƒæ·»åŠ æ ‡æ³¨
- ðŸ’¾ **æ— ç¼é›†æˆ** - ç›´æŽ¥ä¿å­˜åˆ° Anki ç¬”è®°
- ðŸŽ¯ **å³é”®ç¼–è¾‘** - ä¾¿æ·çš„å›¾åƒç¼–è¾‘å…¥å£

### æŠ€æœ¯æž¶æž„
- **ç›®æ ‡å¹³å°**: Anki 25.06+ (Qt6)
- **æ ¸å¿ƒç¼–è¾‘å™¨**: Method Draw (SVG çŸ¢é‡ç¼–è¾‘å™¨)
- **é›†æˆæ–¹å¼**: WebView + JavaScript Bridge
- **ä¸»è¦æ¨¡å—**:
  - `editor.py` - ä¸»ç¼–è¾‘å™¨é›†æˆ
  - `annotation.py` - å›¾åƒæ ‡æ³¨åŠŸèƒ½
  - `utils.py` - å·¥å…·å‡½æ•°
  - `web/Method-Draw/` - å®Œæ•´çš„ Web ç¼–è¾‘å™¨

### å¼€å‘çŠ¶æ€
- âœ… åŸºç¡€æž¶æž„å®Œæˆ (src-layout + aadt å·¥å…·é“¾)
- âœ… Method Draw ç¼–è¾‘å™¨é›†æˆ
- âœ… æ’ä»¶é…ç½®æ–‡ä»¶å®Œæˆ
- ðŸ”„ æ ¸å¿ƒåŠŸèƒ½å¼€å‘ä¸­
- â³ å¾…å‘å¸ƒåˆ° AnkiWeb

åœ¨æ‰§è¡Œå¼€å‘ä»»åŠ¡æ—¶ï¼Œè¯·ç‰¢è®°ä»¥ä¸‹è§„åˆ™ï¼š

1. åœ¨ç¡®å®šæ‰§è¡Œè®¡åˆ’å’Œç”Ÿæˆä»£ç æ—¶ï¼Œåº”å§‹ç»ˆä¼˜å…ˆè€ƒè™‘ @ANKI.md ä¸­çš„æœ€æ–°å¼€å‘æŒ‡å—
2. å½“ç¼–å†™çš„ä»£ç æ— æ³•å®žçŽ°é¢„æœŸæ•ˆæžœçš„æ—¶å€™ï¼Œè¯·æ ¹æ® @ANKI.md ä¸­çš„æŒ‡å¼•æŸ¥æ‰¾æ›´è¯¦ç»†çš„å¼€å‘è¯´æ˜Ž
3. å¦‚æžœ @ANKI.md ä¸­æ²¡æœ‰ç›¸åº”å†…å®¹ï¼Œåˆ™æœç´¢é¡¹ç›®æ ¹ç›®å½•ä¸‹ `.venv` ä¸‹ `anki` å’Œ `aqt` ä¸¤ä¸ªæ ¸å¿ƒåº“çš„æºä»£ç 
4. ç»å¯¹ä¸è¦ä½¿ç”¨ç½‘ç»œæœç´¢æŸ¥æ‰¾å¯¹åº”çš„ API å’Œæ–¹æ³•ï¼Œç½‘ç»œä¸Šçš„å†…å®¹å·²å…¨éƒ¨è¿‡æ—¶ï¼Œæ²¡æœ‰ä»»ä½•å‚è€ƒä»·å€¼

## å¼€å‘å†³ç­–åŽŸåˆ™

1. **åŠŸèƒ½å®žçŽ°** > æŠ€æœ¯å®Œç¾Ž
2. **ç®€å•å¯é ** > å¤æ‚ä¼˜é›…  
3. **æ˜“äºŽç»´æŠ¤** > å±•ç¤ºæŠ€å·§
4. **æ»¡è¶³éœ€æ±‚** > è¿‡åº¦è®¾è®¡

## å‚è€ƒèµ„æ–™

1. **ä¼˜å…ˆé¡¹ç›®æ–‡æ¡£**: é¡¹ç›®æ ¹ç›®å½•ä¸‹ @ANKI.md ä½œä¸ºå¯¼èˆªä¸­å¿ƒï¼ŒæŒ‡å‘ `./ankidoc ç›®å½•ä¸‹çš„ä¸“é—¨æ–‡æ¡£
2. **è¾…åŠ©æœ¬åœ°æºä»£ç **: å¦‚æžœ @ANKI.md ä¸­æ²¡æœ‰ç›¸åº”å†…å®¹ï¼Œåˆ™æ£€æŸ¥é¡¹ç›®æ ¹ç›®å½•ä¸‹ `.venv` ä¸‹ `anki` å’Œ `aqt` ä¸¤ä¸ªæ ¸å¿ƒåº“çš„æºä»£ç 
3. **ç¦æ­¢ç½‘ç»œæœç´¢**: ç½‘ç»œä¸Šå¯ä»¥æœé›†åˆ°çš„å†…å®¹å·²å…¨éƒ¨è¿‡æ—¶ï¼Œç»å¯¹ä¸è¦æœç´¢å’Œå‚è€ƒä½¿ç”¨

## æ–‡æ¡£æŸ¥æ‰¾é¡ºåº

é‡åˆ°å…·ä½“å¼€å‘é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾è§£å†³æ–¹æ¡ˆï¼š

1. **ç¡®å®šæ–‡æ¡£ç±»åž‹**: å…ˆæŸ¥çœ‹ @ANKI.md ç¡®å®šéœ€è¦å“ªç§ç±»åž‹çš„æ–‡æ¡£
2. **æŸ¥æ‰¾å…·ä½“æ–¹æ¡ˆ**: æ ¹æ® @ANKI.md çš„æŒ‡å¼•ï¼Œåˆ° @ankidoc ç›®å½•ä¸‹å¯¹åº”æ–‡æ¡£æŸ¥æ‰¾å…·ä½“è§£å†³æ–¹æ¡ˆ
3. **æ·±å…¥æºç **: å¦‚æžœæ–‡æ¡£ä¸å¤Ÿè¯¦ç»†ï¼Œå†æŸ¥çœ‹æœ¬åœ° `.venv` ä¸‹çš„æºä»£ç 

## é¡¹ç›®æŠ€æœ¯æ ˆ

- **src-layout**: æœ€ä½³å®žè·µé¡¹ç›®ç»“æž„
- **python**: Python 3.13ï¼Œå……åˆ†åˆ©ç”¨é™æ€ç±»åž‹ç‰¹æ€§
- **qt6**: é€šè¿‡ `aqt.qt.*` å¯¼å…¥å…¶ Anki ä¸“ç”¨ç»‘å®š
- **uv**: å¼ºåˆ¶ä½¿ç”¨ uv ç®¡ç†å½“å‰ç›®å½•ä¸‹é¡¹ç›®çš„ä¾èµ–
- **ruff**: å¼ºåˆ¶ä½¿ç”¨ `uv ruff check` è¿›è¡Œä»£ç è¯­æ³•æ£€æŸ¥å’Œæ ¼å¼åŒ–
- **ty**: å¼ºåˆ¶ä½¿ç”¨ `uv ty check` è¿›è¡Œé™æ€ç±»åž‹æ£€æŸ¥
- **aadt**: å°½å¯èƒ½ä½¿ç”¨ aadt åº“çš„ç›¸å…³åŠŸèƒ½è¾…åŠ©è¿›è¡Œå¿«é€Ÿçš„å¼€å‘

### UI å¼€å‘

- **ä»…æ”¯æŒ Qt6**: æ­¤é¡¹ç›®ä»…æ”¯æŒ Qt6ï¼Œä¸è¦æ·»åŠ  Qt5 çš„å…¼å®¹ä»£ç 
- **ç›´æŽ¥è°ƒæ•´ .ui æ–‡ä»¶**: éœ€è¦ä¿®æ”¹ UI è®¾è®¡æ—¶ï¼Œç›´æŽ¥ä¿®æ”¹æ ¹ç›®å½•ä¸‹ `ui/designer` å­ç›®å½•ä¸­çš„ `.ui` æ–‡ä»¶
- **èµ„æºæ–‡ä»¶**: ç¦æ­¢ä½¿ç”¨ QRC æ–‡ä»¶ï¼Œä½¿ç”¨ç›´æŽ¥æ–‡ä»¶è·¯å¾„ï¼Œæ”¾åœ¨ `ui/resources` å­ç›®å½•ä¸­
- **ä½¿ç”¨ aadt è½¬åŒ– ui æ–‡ä»¶**: ä¸è¦æ‰‹åŠ¨è¿›è¡Œè½¬åŒ–å’Œå¤åˆ¶ï¼Œè€Œæ˜¯ä½¿ç”¨ `aadt ui` å‘½ä»¤è‡ªåŠ¨è½¬åŒ– 

## é¡¹ç›®ç»“æž„

```
your-addon/
â”œâ”€â”€ src/your_module/            # ä¸» Python åŒ… (src-layout)
â”‚   â”œâ”€â”€ __init__.py             # æ’ä»¶å…¥å£ç‚¹å’Œä¸»è¦åŠŸèƒ½
â”‚   â””â”€â”€ gui/                    # ç¼–è¯‘çš„ UI æ–‡ä»¶ (ä½¿ç”¨ aadt ä»Ž .ui è½¬æ¢)
â”œâ”€â”€ ui/                         # UI æºæ–‡ä»¶
â”‚   â”œâ”€â”€ designer/               # Qt Designer .ui æ–‡ä»¶
â”‚   â””â”€â”€ resources/              # UI èµ„æº (å›¾æ ‡ã€æ ·å¼ç­‰)
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶ (TDD æ–¹æ³•)
â”œâ”€â”€ addon.json                  # æ’ä»¶é…ç½®
â”œâ”€â”€ pyproject.toml              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ .python-version             # Python ç‰ˆæœ¬è§„èŒƒ
â”œâ”€â”€ README.md                   # æ’ä»¶è¯´æ˜Ž
â”œâ”€â”€ ANKI.md                     # ANKI æ ¸å¿ƒåº“è¯¦è§£
â””â”€â”€ CLAUDE.md                   # æœ¬æ–‡ä»¶
```

## ä¾èµ–ç®¡ç†

æœ¬é¡¹ç›®ä½¿ç”¨å•ä¸€ `dev` ç»„åŒ…å«æ‰€æœ‰å¼€å‘ä¾èµ–ï¼š

```bash
# å®‰è£…/æ›´æ–°æ‰€æœ‰å¼€å‘ä¾èµ–
uv sync --group dev

# åŒ…å«:
# - anki>=25.6                  # Anki æ ¸å¿ƒåº“
# - aqt>=25.6                   # Anki ä¸“å±ž PyQt6 åº“
# - aadt>=1.1.0                 # å¼€å‘å·¥å…·åº“
# - ruff>=0.12.1                # å¿«é€Ÿä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
# - ty>=0.0.1a14                # é™æ€ç±»åž‹æ£€æŸ¥
# - pytest>=8.0.0               # æµ‹è¯•æ¡†æž¶
```
